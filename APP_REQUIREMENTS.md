# 앱 요구사항 명세서

## 프로젝트 개요
- **앱 이름**: Reading Buddy (가칭)
- **플랫폼**: iOS / Android (선택)
- **목적**: VR 한글 학습 시스템의 모바일 컴패니언 앱
- **주요 역할**:
  1. VR 기기 로그인 지원 (Device Code 입력)
  2. 학습 대시보드 제공 (통계 및 분석)

---

## 핵심 기능

### 1. 인증 및 로그인

#### 1.1 회원가입
- 이메일, 비밀번호, 닉네임 입력
- 입력 검증:
  - 이메일 형식 체크
  - 비밀번호 강도 확인 (최소 8자 권장)
  - 닉네임 10자 제한

#### 1.2 일반 로그인
- 이메일/비밀번호로 로그인
- 자동 로그인 옵션 (Refresh Token 활용)
- 로그인 상태 유지

#### 1.3 VR 기기 로그인 지원
- **사용자 시나리오**:
  1. VR 기기에서 "앱으로 로그인" 선택
  2. VR 화면에 10자리 코드 표시
  3. 사용자가 앱을 열고 로그인 상태 확인
  4. 앱에서 "VR 기기 연결" 메뉴 선택
  5. 10자리 코드 입력
  6. 인증 성공 메시지 표시
  7. VR 기기에 자동 로그인

- **UI 요구사항**:
  - 코드 입력 화면: 큰 입력 필드, 자동 대문자 변환
  - 입력 중 실시간 검증 (10자리 체크)
  - 성공/실패 피드백 (애니메이션, 진동)

#### 1.4 토큰 관리
- Access Token 자동 갱신
- Refresh Token 안전 저장 (Keychain/Keystore)
- 401 에러 시 자동 재로그인 시도

---

### 2. 대시보드

#### 2.1 홈 화면
- **출석 현황**:
  - 현재 달의 출석 달력
  - 출석한 날짜 하이라이트
  - 연속 출석 일수 표시
  - 총 학습 시간 (이번 달)

- **최근 학습 정보**:
  - 마지막 플레이 날짜 및 시간
  - 오늘의 학습 시간

- **빠른 통계**:
  - 이번 주 출석 일수
  - 총 스테이지 클리어 수

#### 2.2 학습 분석 화면
- **스테이지별 통계**:
  - 스테이지 선택 드롭다운/탭
  - 선택한 스테이지의:
    - 총 시도 횟수
    - 총 정답/오답 개수
    - 평균 시도 횟수
    - 최근 세션 정답률
  - 그래프/차트로 시각화

- **취약 음소 분석**:
  - 가장 많이 틀린 음소 TOP 10
  - 시도 횟수가 많은 음소 TOP 10
  - 음소별 정답률 (계산 필요)
  - 리스트 또는 차트 형태

- **학습 트렌드**:
  - 기간별 플레이 시간 그래프 (주간/월간)
  - 스테이지별 정답률 추이

#### 2.3 출석 상세 화면
- **달력 뷰**:
  - 월별 출석 기록
  - 날짜 클릭 시 해당 날의 플레이 시간 표시
  - 출석/미출석 색상 구분

- **통계**:
  - 선택한 기간의 총 출석 일수
  - 평균 플레이 시간
  - 가장 오래 플레이한 날

#### 2.4 프로필 화면
- 사용자 정보 표시 (닉네임, 이메일)
- 로그아웃 버튼
- 앱 버전 정보
- (추후) 프로필 수정 기능

---

## UI/UX 요구사항

### 디자인 컨셉
- **타겟**: 한글 학습자 (어린이 또는 외국인)
- **분위기**: 친근하고 직관적
- **색상**: 밝고 따뜻한 톤, 학습 동기 부여
- **폰트**: 가독성 높은 한글 폰트

### 네비게이션
- **탭 바** (하단):
  1. 홈
  2. 학습 분석
  3. 출석
  4. 프로필

### 주요 인터랙션
- Pull-to-refresh: 데이터 최신화
- 로딩 인디케이터: API 호출 중 표시
- 에러 처리: 사용자 친화적 메시지
- 빈 상태: 데이터 없을 때 안내 메시지

---

## 기술 요구사항

### 플랫폼별 권장 기술 스택

#### iOS
- **언어**: Swift
- **프레임워크**: SwiftUI 또는 UIKit
- **네트워킹**: Alamofire 또는 URLSession
- **차트**: Charts 라이브러리
- **보안**: Keychain Services

#### Android
- **언어**: Kotlin
- **프레임워크**: Jetpack Compose 또는 XML
- **네트워킹**: Retrofit + OkHttp
- **차트**: MPAndroidChart
- **보안**: EncryptedSharedPreferences / Keystore

#### 크로스 플랫폼 (선택 사항)
- **React Native**: JavaScript/TypeScript
- **Flutter**: Dart
- **장점**: 한 번의 개발로 iOS/Android 모두 지원
- **단점**: 네이티브 대비 성능 및 UX 차이

### 아키텍처
- **패턴**: MVVM 또는 Clean Architecture
- **상태 관리**: Provider, Bloc (Flutter), Redux (React Native)
- **API 통신**: RESTful API
- **데이터 저장**:
  - 토큰: Keychain/Keystore
  - 캐시: UserDefaults/SharedPreferences 또는 로컬 DB

### 라이브러리 권장
- **네트워킹**: HTTP 클라이언트 (Retrofit, Alamofire 등)
- **차트**: 그래프 라이브러리 (MPAndroidChart, Charts 등)
- **달력**: 달력 UI 컴포넌트
- **이미지**: 이미지 로딩 최적화 (필요 시)

---

## API 연동

### 필수 API
1. **POST** `/api/user/signup`: 회원가입
2. **POST** `/api/user/login`: 로그인
3. **POST** `/api/user/reissue-token`: 토큰 재발급
4. **POST** `/api/user/auth-device`: VR 기기 인증
5. **GET** `/api/dashboard/stage/info`: 스테이지 통계
6. **GET** `/api/dashboard/stage/try-avg`: 평균 시도 횟수
7. **GET** `/api/dashboard/stage/correct-rate`: 정답률
8. **GET** `/api/dashboard/attendance`: 출석 기록
9. **GET** `/api/dashboard/mistake/phonemes/rank`: 틀린 음소 랭킹
10. **GET** `/api/dashboard/try/phonemes/rank`: 시도 많은 음소 랭킹

### API 호출 전략
- **병렬 호출**: 대시보드 진입 시 여러 API 동시 호출
- **캐싱**: 자주 변하지 않는 데이터 캐싱 (5~10분)
- **에러 처리**: 네트워크 오류, 타임아웃 대응
- **재시도**: 실패 시 자동 재시도 (최대 3회)

---

## 데이터 모델

### User
```json
{
  "id": 1,
  "email": "user@example.com",
  "nickname": "닉네임"
}
```

### Token
```json
{
  "accessToken": "eyJhbGc...",
  "refreshToken": "eyJhbGc..."
}
```

### StageInfo
```json
{
  "stage": "1.1.1",
  "totalTryCount": 150,
  "totalCorrectCount": 120,
  "totalWrongCount": 30
}
```

### Attendance
```json
{
  "attendDate": "2025-01-01",
  "playtime": "15:30",
  "attended": true
}
```

### PhonemeRank
```json
{
  "phonemeId": 1,
  "value": "ㄱ",
  "category": "자음",
  "wrongCnt": 15
}
```

---

## 비기능 요구사항

### 성능
- 앱 시작 시간: 3초 이내
- API 응답 대기: 로딩 인디케이터 표시
- 부드러운 스크롤 및 애니메이션 (60fps)

### 보안
- HTTPS 통신 필수
- 토큰 암호화 저장
- 민감 정보 로그 출력 금지
- SSL Pinning (선택 사항)

### 접근성
- 다크 모드 지원 (선택 사항)
- 폰트 크기 조절 지원
- 색맹 모드 고려

### 지원 환경
- **iOS**: 15.0 이상
- **Android**: API 24 (Android 7.0) 이상

---

## 개발 단계별 우선순위

### Phase 1: MVP (Minimum Viable Product)
1. 회원가입 / 로그인
2. VR 기기 코드 입력 (Device Code)
3. 홈 화면 (출석 달력 기본)
4. 스테이지 통계 조회 (1개 스테이지)
5. 로그아웃

**목표**: VR 기기 로그인 지원 + 기본 대시보드

### Phase 2: 대시보드 강화
1. 모든 스테이지 통계
2. 취약 음소 분석 (TOP 10)
3. 출석 상세 화면 (월별 달력)
4. 차트/그래프 추가
5. Pull-to-refresh

**목표**: 완전한 학습 분석 기능

### Phase 3: UX 개선
1. 애니메이션 및 전환 효과
2. 에러 처리 고도화
3. 오프라인 모드 (캐시 데이터 표시)
4. 푸시 알림 (학습 리마인더)
5. 다국어 지원 (한국어/영어)

**목표**: 사용자 경험 최적화

### Phase 4: 확장 기능 (선택)
1. 프로필 수정
2. 학습 목표 설정
3. 주간/월간 리포트
4. 친구 기능 (랭킹)
5. 배지 및 업적 시스템

**목표**: 사용자 참여 증대

---

## 테스트 계획

### 단위 테스트
- API 통신 로직
- 데이터 모델 변환
- 토큰 관리 로직

### 통합 테스트
- 로그인 플로우
- VR 기기 인증 플로우
- 대시보드 데이터 로딩

### UI 테스트
- 주요 화면 렌더링
- 사용자 인터랙션 (탭, 스크롤 등)

### 사용자 테스트
- 베타 테스터 모집
- VR 기기와 연동 테스트
- 피드백 수집 및 개선

---

## 배포

### iOS
- App Store 등록
- TestFlight 베타 테스트
- 스크린샷 및 앱 설명 준비

### Android
- Google Play 등록
- 내부 테스트 트랙 활용
- 스크린샷 및 앱 설명 준비

---

## 참고 사항

### VR 기기 로그인 주의사항
- Device Code 유효시간 1분: 사용자에게 안내
- 코드 입력 실패 시 재시도 가능
- VR 기기에서 폴링 중 앱 인증 완료 시 즉시 반영

### 대시보드 데이터 갱신
- VR에서 학습 완료 후 앱에서 수동 갱신 필요
- 실시간 동기화는 없음
- Pull-to-refresh 필수

### 백엔드 협업
- API 변경 시 백엔드 팀과 협의
- 추가 API 필요 시 요청
- 에러 응답 형식 통일

---

## 예상 개발 기간

- **Phase 1 (MVP)**: 2~3주
- **Phase 2 (대시보드 강화)**: 2주
- **Phase 3 (UX 개선)**: 1~2주
- **Phase 4 (확장 기능)**: 선택 사항

**총 예상 기간**: 5~7주 (1명 기준)

---

## 다음 단계
1. 플랫폼 선택 (iOS / Android / 크로스 플랫폼)
2. 프로젝트 초기 설정 (Xcode / Android Studio / Flutter 등)
3. API 명세서 기반 네트워킹 레이어 구축
4. UI 프로토타입 작성
5. Phase 1 개발 시작
